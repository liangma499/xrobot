server {
	listen 80;
	listen 443;
	
	server_name res.cyberpunkr.io;
	
	index index.php index.html index.htm;
	ssl_certificate     /etc/nginx/cert/cert.crt;
	ssl_certificate_key /etc/nginx/cert/private.key;
	set $root_path '/data/wwwroot/res.cyberpunkr.io/';
	root $root_path;

	include       mime.types;
	default_type  application/octet-stream;

	types {
		application/vnd.android.package-archive apk;  # 添加 APK 类型
	}
	
	location ~* \.apk$ {
        	autoindex on;       # （可选）启用目录浏览
		add_header Content-Disposition "attachment; filename=$1" always;
		add_header Content-Type application/vnd.android.package-archive;
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Methods' 'GET,POST,OPTIONS,DELETE';
		add_header 'Access-Control-Allow-Header' 'Content-Type,*';
		try_files $uri =404;  # 确保文件存在
	}
	location ~* \.(zip|pdf|doc|docx|xls|xlsx|ppt|pptx|mobileconfig)$ {
        	autoindex on;       # （可选）启用目录浏览
		add_header Content-Disposition "attachment";
       		add_header Content-Type application/octet-stream; # 确保文件 MIME 类型
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Methods' 'GET,POST,OPTIONS,DELETE';
		add_header 'Access-Control-Allow-Header' 'Content-Type,*';
		try_files $uri =404;  # 确保文件存在
    	}
}
